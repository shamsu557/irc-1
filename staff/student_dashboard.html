<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="studentDashboard">Student Dashboard</title>
     <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style type="text/css">@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/500/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/500/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/latin/500/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/500/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/500/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/500/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/greek/500/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/greek/700/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/latin/700/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/700/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/700/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/700/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/700/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/700/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root{--primary-color:#4285f4;--secondary-color:#34a853;--background-color:#f5f7fa;--text-color:#202124;}
        body{font-family:'Roboto',sans-serif;background:var(--background-color);color:var(--text-color);min-height:100vh;margin:0;}
        .sidebar{width:260px;background:#202124;color:#fff;position:fixed;top:0;left:0;height:100vh;overflow-y:auto;transition:transform .3s;z-index:1000;padding-top:1rem;}
        .sidebar.collapsed{transform:translateX(-260px);}
        .sidebar .nav-link{color:#bdc1c6;padding:.75rem 1rem;border-radius:.375rem;display:flex;align-items:center;transition:all .2s;}
        .sidebar .nav-link:hover,.sidebar .nav-link.active{background:var(--primary-color);color:#fff;}
        .sidebar .nav-link i{margin-right:.75rem;width:1.25rem;text-align:center;}
        .main-content{margin-left:260px;padding:1.5rem;transition:margin-left .3s;}
        .dashboard-card{background:#fff;border-radius:.75rem;box-shadow:0 4px 6px rgba(0,0,0,0.1);padding:1.5rem;}
        .card-gradient-1{background:linear-gradient(135deg,#4285f4,#669df6);}
        .card-gradient-2{background:linear-gradient(135deg,#34a853,#57b76f);}
        .card-gradient-3{background:linear-gradient(135deg,#fbbc05,#fbdc59);}
        #sidebarToggleMobile{position:fixed;top:1rem;right:1rem;z-index:1101;background:var(--primary-color);color:#fff;border:none;border-radius:.5rem;padding:.5rem .75rem;display:none;}
        @media(max-width:768px){
            .sidebar{transform:translateX(-260px);}
            .sidebar.open{transform:translateX(0);}
            .main-content{margin-left:0;padding:1rem;}
            #sidebarToggleMobile{display:inline-flex;}
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="p-4 border-b border-gray-700 text-center">
            <img id="profilePicture" src="/uploads/default.jpg" alt="Profile" class="w-20 h-20 rounded-full border-4 border-white mb-3 object-cover">
            <h5 id="studentName" class="fw-bold">Loading...</h5>
            <p class="text-gray-400 small" id="studentIdDisplay">â€”</p>
        </div>
        <ul class="nav flex-column mt-4">
            <li><a href="#" class="nav-link active" data-view="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li><a href="#" class="nav-link" data-view="videos"><i class="fas fa-video"></i> Memorization Videos</a></li>
            <li><a href="#" class="nav-link" data-view="attendance"><i class="fas fa-calendar-check"></i> Attendance</a></li>
            <li><a href="#" class="nav-link" data-view="tahfiz"><i class="fas fa-book-quran"></i> Tahfiz Report</a></li>
            <li><a href="#" class="nav-link" data-view="academic"><i class="fas fa-graduation-cap"></i> Academic Report</a></li>
            <li><a href="#" class="nav-link" data-view="overall"><i class="fas fa-list-ol"></i> Overall Tahfiz</a></li>
            <li class="mt-auto p-4">
                <button id="logoutBtn" class="btn btn-outline-light w-100"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <button id="sidebarToggleMobile"><i class="fas fa-bars"></i></button>

        <!-- Dashboard View -->
        <div id="dashboard-view">
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
                <div class="dashboard-card card-gradient-1 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h5 class="text-sm font-medium opacity-90">My Classes</h5>
                            <p class="text-4xl font-bold mt-1" id="totalClassesCount">0</p>
                        </div>
                    </div>
                </div>
                <div class="dashboard-card card-gradient-2 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h5 class="text-sm font-medium opacity-90">My Subjects</h5>
                            <p class="text-4xl font-bold mt-1" id="totalSubjectsCount">0</p>
                        </div>
                    </div>
                </div>
                <div class="dashboard-card card-gradient-3 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h5 class="text-sm font-medium opacity-90">Memorization Videos</h5>
                            <p class="text-4xl font-bold mt-1" id="totalVideosCount">0</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-6 bg-white rounded-lg shadow p-6">
                <h3 class="text-xl font-bold mb-4">Personal Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <p><strong>Student ID:</strong> <span id="studentIdDisplay2"></span></p>
                    <p><strong>Gender:</strong> <span id="gender"></span></p>
                    <p><strong>Date of Birth:</strong> <span id="dateOfBirth"></span></p>
                    <p><strong>Phone:</strong> <span id="guardianPhone"></span></p>
                    <p><strong>Email:</strong> <span id="email"></span></p>
                    <p><strong>Address:</strong> <span id="address"></span></p>
                </div>
                <div class="mt-4">
                    <strong>Classes:</strong> <div id="classes" class="d-inline"></div>
                    <br><strong>Subjects:</strong> <div id="subjects" class="d-inline"></div>
                </div>
            </div>
        </div>

        <!-- Videos View -->
        <div id="videos-view" style="display:none;">
            <h2 class="text-2xl font-semibold mb-6 text-emerald-700">Memorization Videos</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8" id="videoGrid"></div>
            <div class="text-center mt-8">
                <button id="loadMoreBtn" class="btn btn-success px-10 py-3 text-lg">Load More</button>
                <button id="showLessBtn" class="btn btn-outline-secondary px-10 py-3 text-lg hidden">Show Less</button>
            </div>
        </div>

        <!-- Attendance View -->
        <div id="attendance-view" style="display:none;">
            <h2 class="text-2xl font-semibold mb-4">My Attendance</h2>
            <ul class="nav nav-tabs mb-4">
                <li class="nav-item"><a class="nav-link active" data-tab="weekly">Weekly</a></li>
                <li class="nav-item"><a class="nav-link" data-tab="cumulative">Cumulative</a></li>
            </ul>

            <div id="weekly-section">
                <div class="row g-3 mb-3">
                    <div class="col-md-4"><select id="attSession" class="form-select"><option value="">Session</option></select></div>
                    <div class="col-md-4"><select id="attTerm" class="form-select"><option value="">Term</option></select></div>
                    <div class="col-md-4"><select id="attWeek" class="form-select"><option value="">Week</option></select></div>
                </div>
                <button id="loadWeeklyBtn" class="btn btn-primary">Load Weekly Attendance</button>
                <div id="weeklyResult" class="mt-4"></div>
            </div>

            <div id="cumulative-section" style="display:none;">
                <div class="row g-3 mb-3">
                    <div class="col-md-6"><select id="cumSession" class="form-select"><option value="">Session</option></select></div>
                    <div class="col-md-6"><select id="cumTerm" class="form-select"><option value="">Term</option></select></div>
                </div>
                <button id="loadCumBtn" class="btn btn-success">Load Cumulative</button>
                <div id="cumResult" class="mt-4"></div>
            </div>
        </div>

        <!-- Tahfiz Report -->
        <div id="tahfiz-view" style="display:none;">
            <h2 class="text-2xl font-semibold mb-4">Tahfiz Report</h2>
            <div class="card"><div class="card-body">
                <div class="row g-3 mb-4">
                    <div class="col-md-6"><select id="tahfizSession" class="form-select"><option value="">Session</option></select></div>
                    <div class="col-md-6"><select id="tahfizTerm" class="form-select"><option value="">Term</option></select></div>
                </div>
                <button id="loadTahfiz" class="btn btn-success btn-lg">View Tahfiz Report</button>
                <div id="tahfizPreview" class="mt-4"></div>
            </div></div>
        </div>

        <!-- Academic Report -->
        <div id="academic-view" style="display:none;">
            <h2 class="text-2xl font-semibold mb-4">Academic Report</h2>
            <div class="card"><div class="card-body">
                <div class="row g-3 mb-4">
                    <div class="col-md-6"><select id="academicSession" class="form-select"><option value="">Session</option></select></div>
                    <div class="col-md-6"><select id="academicTerm" class="form-select"><option value="">Term</option></select></div>
                </div>
                <button id="loadAcademic" class="btn btn-primary btn-lg">View Academic Report</button>
                <div id="academicPreview" class="mt-4"></div>
            </div></div>
        </div>

        <!-- Overall Tahfiz -->
        <div id="overall-view" style="display:none;">
            <h2 class="text-2xl font-semibold mb-4">Overall Tahfiz Progress</h2>
            <div class="card"><div class="card-body">
                <div class="row g-3 mb-4">
                    <div class="col-md-6"><select id="overallSession" class="form-select"><option value="">Session</option></select></div>
                    <div class="col-md-6"><select id="overallTerm" class="form-select"><option value="">Term</option></select></div>
                </div>
                <button id="loadOverall" class="btn btn-success">Load Progress</button>
                <div id="overallTable" class="mt-4 table-responsive"></div>
            </div></div>
        </div>
    </div>

    <!-- Video Modal -->
    <div class="modal fade" id="videoModal" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content bg-dark">
                <div class="modal-header bg-success text-white">
                    <h5>Memorization Video</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-0">
                    <video id="modalVideoPlayer" controls controlsList="nodownload" class="w-100" style="height:70vh;"></video>
                </div>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div class="modal fade" id="messageModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-xl shadow-2xl">
                <div class="modal-header">
                    <h5 class="modal-title font-bold text-gray-800" id="messageModalLabel">Message</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-6">
                    <p id="messageText" class="text-gray-700"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="./js/student_dashboard.js"></script>
</body>
</html>